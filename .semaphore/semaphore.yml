version: v1.0
name: Nome di cosa?

blocks:
  - name: Build and test
    agent:
      machine:
        type: e1-standard-2
      containers:
        - name: main
          image: microsoft/dotnet:2.2-sdk
    task:
      jobs:
      - name: Build
        commands:
          - checkout
          - ls -lah
          - dotnet build
          
      - name: Test
        commands:
          - checkout
          - dotnet test
          
  - name: Docker
    agent:
      machine:
        type: e1-standard-2
        os_image: ubuntu1804
    task:
      jobs:
      - name: Build Docker image
        commands:
          - checkout
          - ls -lah
          - docker build -t expelliarbus .
          - docker images
          - ls -lah
